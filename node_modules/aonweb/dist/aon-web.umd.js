(function(N,yt){typeof exports=="object"&&typeof module<"u"?yt(exports):typeof define=="function"&&define.amd?define(["exports"],yt):(N=typeof globalThis<"u"?globalThis:N||self,yt(N.aonweb={}))})(this,function(N){"use strict";const Ze={dev:{address:{AonAppPoint:"0xcBBE5C513C225c0348d6098877d2d7B0766247c9",AonRewardPoint:"",AonUser:"0xbA00634aA5Ec317A1a26B2972fa2f8cFA747a057",AonApp:"",AonAiModel:"",AonAiCluster:"",AonAiExcutor:"0x9ccf4B238DEb6868DF3f5980751ab7e2DB0CCE6f"},rpc:"https://sepolia.rpc.aonnet.io",url:"http://192.168.1.180:8081",storage_url:"https://app.aonet.ai"},prod:{address:{AonAppPoint:"0xdEEb5695B80fA2EF7d2cEcFe38AE1c45E445c149",AonRewardPoint:"0xAaA6BE9930AC8488c6e61A6bE635b541D5391447",AonUser:"0x64ea0CC733f9B899545aE454f1890b5eb512560F",AonApp:"0x81Ff185BC3186300Dc4D18605a9bcD00673452c5",AonAiModel:"0x741a719B63C4CeEb6579FF8B43A464692Fd27749",AonAiCluster:"0x2Ca18Fd1Dd91E7e8eb3D21ef44dFedB875aFbd58",AonAiExcutor:"0xA2Eb5C8DeeC787D488386DB9d3f9baE502eddF31"},rpc:"https://sepolia.rpc.aonnet.io",url:"https://app.aonet.ai",storage_url:"https://app.aonet.ai"}}["prod"],Jt={TYPE_TG:1,TYPE_FP:2};class qs{constructor({rpc_url:e=Ze.rpc,force_aon:s=!0,abi:r=null,contract_address:i=null,try_time:n=5,userId:a="",inviter:o=""}={}){if(this.rpc_url=e,this.type=Jt.TYPE_FP,this.storage_url=Ze.storage_url,this.server=Ze.url,this.force_aon=s,this.abi=r,this.userId=a,this.inviter=o,this.try_time=n,this.contract_address=i,this.type==Jt.TYPE_FP&&this.storage_url=="")throw new Error("storage_url must be set when type = TYPE_FP")}static get LoginTypes(){return Jt}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Js;function _(){return Js.apply(null,arguments)}function Ii(t){Js=t}function J(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Oe(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kt(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(S(t,e))return!1;return!0}function L(t){return t===void 0}function le(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Qe(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ks(t,e){var s=[],r,i=t.length;for(r=0;r<i;++r)s.push(e(t[r],r));return s}function ge(t,e){for(var s in e)S(e,s)&&(t[s]=e[s]);return S(e,"toString")&&(t.toString=e.toString),S(e,"valueOf")&&(t.valueOf=e.valueOf),t}function re(t,e,s,r){return Sr(t,e,s,r,!0).utc()}function Yi(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(t){return t._pf==null&&(t._pf=Yi()),t._pf}var Zt;Array.prototype.some?Zt=Array.prototype.some:Zt=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function Qt(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=g(t),s=Zt.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function gt(t){var e=re(NaN);return t!=null?ge(g(e),t):g(e).userInvalidated=!0,e}var Zs=_.momentProperties=[],Xt=!1;function es(t,e){var s,r,i,n=Zs.length;if(L(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),L(e._i)||(t._i=e._i),L(e._f)||(t._f=e._f),L(e._l)||(t._l=e._l),L(e._strict)||(t._strict=e._strict),L(e._tzm)||(t._tzm=e._tzm),L(e._isUTC)||(t._isUTC=e._isUTC),L(e._offset)||(t._offset=e._offset),L(e._pf)||(t._pf=g(e)),L(e._locale)||(t._locale=e._locale),n>0)for(s=0;s<n;s++)r=Zs[s],i=e[r],L(i)||(t[r]=i);return t}function Xe(t){es(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Xt===!1&&(Xt=!0,_.updateOffset(this),Xt=!1)}function K(t){return t instanceof Xe||t!=null&&t._isAMomentObject!=null}function Qs(t){_.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function H(t,e){var s=!0;return ge(function(){if(_.deprecationHandler!=null&&_.deprecationHandler(null,t),s){var r=[],i,n,a,o=arguments.length;for(n=0;n<o;n++){if(i="",typeof arguments[n]=="object"){i+=`
[`+n+"] ";for(a in arguments[0])S(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[n];r.push(i)}Qs(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Xs={};function er(t,e){_.deprecationHandler!=null&&_.deprecationHandler(t,e),Xs[t]||(Qs(e),Xs[t]=!0)}_.suppressDeprecationWarnings=!1,_.deprecationHandler=null;function ie(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Li(t){var e,s;for(s in t)S(t,s)&&(e=t[s],ie(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ts(t,e){var s=ge({},t),r;for(r in e)S(e,r)&&(Oe(t[r])&&Oe(e[r])?(s[r]={},ge(s[r],t[r]),ge(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)S(t,r)&&!S(e,r)&&Oe(t[r])&&(s[r]=ge({},s[r]));return s}function ss(t){t!=null&&this.set(t)}var rs;Object.keys?rs=Object.keys:rs=function(t){var e,s=[];for(e in t)S(t,e)&&s.push(e);return s};var Ui={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ni(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return ie(r)?r.call(e,s):r}function ne(t,e,s){var r=""+Math.abs(t),i=e-r.length,n=t>=0;return(n?s?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var is=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ns={},je={};function m(t,e,s,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(je[t]=i),e&&(je[e[0]]=function(){return ne(i.apply(this,arguments),e[1],e[2])}),s&&(je[s]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function Fi(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Wi(t){var e=t.match(is),s,r;for(s=0,r=e.length;s<r;s++)je[e[s]]?e[s]=je[e[s]]:e[s]=Fi(e[s]);return function(i){var n="",a;for(a=0;a<r;a++)n+=ie(e[a])?e[a].call(i,t):e[a];return n}}function vt(t,e){return t.isValid()?(e=tr(e,t.localeData()),ns[e]=ns[e]||Wi(e),ns[e](t)):t.localeData().invalidDate()}function tr(t,e){var s=5;function r(i){return e.longDateFormat(i)||i}for(wt.lastIndex=0;s>=0&&wt.test(t);)t=t.replace(wt,r),wt.lastIndex=0,s-=1;return t}var Hi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Bi(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(is).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Gi="Invalid date";function Vi(){return this._invalidDate}var zi="%d",qi=/\d{1,2}/;function Ji(t){return this._ordinal.replace("%d",t)}var Ki={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Zi(t,e,s,r){var i=this._relativeTime[s];return ie(i)?i(t,e,s,r):i.replace(/%d/i,t)}function Qi(t,e){var s=this._relativeTime[t>0?"future":"past"];return ie(s)?s(e):s.replace(/%s/i,e)}var sr={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function B(t){return typeof t=="string"?sr[t]||sr[t.toLowerCase()]:void 0}function as(t){var e={},s,r;for(r in t)S(t,r)&&(s=B(r),s&&(e[s]=t[r]));return e}var Xi={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function en(t){var e=[],s;for(s in t)S(t,s)&&e.push({unit:s,priority:Xi[s]});return e.sort(function(r,i){return r.priority-i.priority}),e}var rr=/\d/,F=/\d\d/,ir=/\d{3}/,os=/\d{4}/,bt=/[+-]?\d{6}/,x=/\d\d?/,nr=/\d\d\d\d?/,ar=/\d\d\d\d\d\d?/,kt=/\d{1,3}/,ls=/\d{1,4}/,St=/[+-]?\d{1,6}/,Ie=/\d+/,Tt=/[+-]?\d+/,tn=/Z|[+-]\d\d:?\d\d/gi,Ot=/Z|[+-]\d\d(?::?\d\d)?/gi,sn=/[+-]?\d+(\.\d{1,3})?/,et=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ye=/^[1-9]\d?/,us=/^([1-9]\d|\d)/,Dt;Dt={};function p(t,e,s){Dt[t]=ie(e)?e:function(r,i){return r&&s?s:e}}function rn(t,e){return S(Dt,t)?Dt[t](e._strict,e._locale):new RegExp(nn(t))}function nn(t){return ue(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,i,n){return s||r||i||n}))}function ue(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function v(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=G(e)),s}var hs={};function P(t,e){var s,r=e,i;for(typeof t=="string"&&(t=[t]),le(e)&&(r=function(n,a){a[e]=v(n)}),i=t.length,s=0;s<i;s++)hs[t[s]]=r}function tt(t,e){P(t,function(s,r,i,n){i._w=i._w||{},e(s,i._w,i,n)})}function an(t,e,s){e!=null&&S(hs,t)&&hs[t](e,s._a,s,t)}function Pt(t){return t%4===0&&t%100!==0||t%400===0}var I=0,he=1,ae=2,j=3,Z=4,ce=5,De=6,on=7,ln=8;m("Y",0,0,function(){var t=this.year();return t<=9999?ne(t,4):"+"+t}),m(0,["YY",2],0,function(){return this.year()%100}),m(0,["YYYY",4],0,"year"),m(0,["YYYYY",5],0,"year"),m(0,["YYYYYY",6,!0],0,"year"),p("Y",Tt),p("YY",x,F),p("YYYY",ls,os),p("YYYYY",St,bt),p("YYYYYY",St,bt),P(["YYYYY","YYYYYY"],I),P("YYYY",function(t,e){e[I]=t.length===2?_.parseTwoDigitYear(t):v(t)}),P("YY",function(t,e){e[I]=_.parseTwoDigitYear(t)}),P("Y",function(t,e){e[I]=parseInt(t,10)});function st(t){return Pt(t)?366:365}_.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var or=Le("FullYear",!0);function un(){return Pt(this.year())}function Le(t,e){return function(s){return s!=null?(lr(this,t,s),_.updateOffset(this,e),this):rt(this,t)}}function rt(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function lr(t,e,s){var r,i,n,a,o;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(i?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(i?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(i?r.setUTCHours(s):r.setHours(s));case"Date":return void(i?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}n=s,a=t.month(),o=t.date(),o=o===29&&a===1&&!Pt(n)?28:o,i?r.setUTCFullYear(n,a,o):r.setFullYear(n,a,o)}}function hn(t){return t=B(t),ie(this[t])?this[t]():this}function cn(t,e){if(typeof t=="object"){t=as(t);var s=en(t),r,i=s.length;for(r=0;r<i;r++)this[s[r].unit](t[s[r].unit])}else if(t=B(t),ie(this[t]))return this[t](e);return this}function dn(t,e){return(t%e+e)%e}var $;Array.prototype.indexOf?$=Array.prototype.indexOf:$=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function cs(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=dn(e,12);return t+=(e-s)/12,s===1?Pt(t)?29:28:31-s%7%2}m("M",["MM",2],"Mo",function(){return this.month()+1}),m("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),m("MMMM",0,0,function(t){return this.localeData().months(this,t)}),p("M",x,Ye),p("MM",x,F),p("MMM",function(t,e){return e.monthsShortRegex(t)}),p("MMMM",function(t,e){return e.monthsRegex(t)}),P(["M","MM"],function(t,e){e[he]=v(t)-1}),P(["MMM","MMMM"],function(t,e,s,r){var i=s._locale.monthsParse(t,r,s._strict);i!=null?e[he]=i:g(s).invalidMonth=t});var fn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ur="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_n=et,pn=et;function mn(t,e){return t?J(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||hr).test(e)?"format":"standalone"][t.month()]:J(this._months)?this._months:this._months.standalone}function yn(t,e){return t?J(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[hr.test(e)?"format":"standalone"][t.month()]:J(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function gn(t,e,s){var r,i,n,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)n=re([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(n,"").toLocaleLowerCase();return s?e==="MMM"?(i=$.call(this._shortMonthsParse,a),i!==-1?i:null):(i=$.call(this._longMonthsParse,a),i!==-1?i:null):e==="MMM"?(i=$.call(this._shortMonthsParse,a),i!==-1?i:(i=$.call(this._longMonthsParse,a),i!==-1?i:null)):(i=$.call(this._longMonthsParse,a),i!==-1?i:(i=$.call(this._shortMonthsParse,a),i!==-1?i:null))}function wn(t,e,s){var r,i,n;if(this._monthsParseExact)return gn.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=re([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(n.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function cr(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),!le(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,cs(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function dr(t){return t!=null?(cr(this,t),_.updateOffset(this,!0),this):rt(this,"Month")}function vn(){return cs(this.year(),this.month())}function bn(t){return this._monthsParseExact?(S(this,"_monthsRegex")||fr.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(S(this,"_monthsShortRegex")||(this._monthsShortRegex=_n),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function kn(t){return this._monthsParseExact?(S(this,"_monthsRegex")||fr.call(this),t?this._monthsStrictRegex:this._monthsRegex):(S(this,"_monthsRegex")||(this._monthsRegex=pn),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function fr(){function t(l,h){return h.length-l.length}var e=[],s=[],r=[],i,n,a,o;for(i=0;i<12;i++)n=re([2e3,i]),a=ue(this.monthsShort(n,"")),o=ue(this.months(n,"")),e.push(a),s.push(o),r.push(o),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Sn(t,e,s,r,i,n,a){var o;return t<100&&t>=0?(o=new Date(t+400,e,s,r,i,n,a),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,s,r,i,n,a),o}function it(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Et(t,e,s){var r=7+e-s,i=(7+it(t,0,r).getUTCDay()-e)%7;return-i+r-1}function _r(t,e,s,r,i){var n=(7+s-r)%7,a=Et(t,r,i),o=1+7*(e-1)+n+a,l,h;return o<=0?(l=t-1,h=st(l)+o):o>st(t)?(l=t+1,h=o-st(t)):(l=t,h=o),{year:l,dayOfYear:h}}function nt(t,e,s){var r=Et(t.year(),e,s),i=Math.floor((t.dayOfYear()-r-1)/7)+1,n,a;return i<1?(a=t.year()-1,n=i+de(a,e,s)):i>de(t.year(),e,s)?(n=i-de(t.year(),e,s),a=t.year()+1):(a=t.year(),n=i),{week:n,year:a}}function de(t,e,s){var r=Et(t,e,s),i=Et(t+1,e,s);return(st(t)-r+i)/7}m("w",["ww",2],"wo","week"),m("W",["WW",2],"Wo","isoWeek"),p("w",x,Ye),p("ww",x,F),p("W",x,Ye),p("WW",x,F),tt(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=v(t)});function Tn(t){return nt(t,this._week.dow,this._week.doy).week}var On={dow:0,doy:6};function Dn(){return this._week.dow}function Pn(){return this._week.doy}function En(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Mn(t){var e=nt(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}m("d",0,"do","day"),m("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),m("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),m("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),m("e",0,0,"weekday"),m("E",0,0,"isoWeekday"),p("d",x),p("e",x),p("E",x),p("dd",function(t,e){return e.weekdaysMinRegex(t)}),p("ddd",function(t,e){return e.weekdaysShortRegex(t)}),p("dddd",function(t,e){return e.weekdaysRegex(t)}),tt(["dd","ddd","dddd"],function(t,e,s,r){var i=s._locale.weekdaysParse(t,r,s._strict);i!=null?e.d=i:g(s).invalidWeekday=t}),tt(["d","e","E"],function(t,e,s,r){e[r]=v(t)});function An(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function xn(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function ds(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Rn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$n=et,jn=et,In=et;function Yn(t,e){var s=J(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?ds(s,this._week.dow):t?s[t.day()]:s}function Ln(t){return t===!0?ds(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Un(t){return t===!0?ds(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Nn(t,e,s){var r,i,n,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)n=re([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(n,"").toLocaleLowerCase();return s?e==="dddd"?(i=$.call(this._weekdaysParse,a),i!==-1?i:null):e==="ddd"?(i=$.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=$.call(this._minWeekdaysParse,a),i!==-1?i:null):e==="dddd"?(i=$.call(this._weekdaysParse,a),i!==-1||(i=$.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=$.call(this._minWeekdaysParse,a),i!==-1?i:null)):e==="ddd"?(i=$.call(this._shortWeekdaysParse,a),i!==-1||(i=$.call(this._weekdaysParse,a),i!==-1)?i:(i=$.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=$.call(this._minWeekdaysParse,a),i!==-1||(i=$.call(this._weekdaysParse,a),i!==-1)?i:(i=$.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function Fn(t,e,s){var r,i,n;if(this._weekdaysParseExact)return Nn.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=re([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(n.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function Wn(t){if(!this.isValid())return t!=null?this:NaN;var e=rt(this,"Day");return t!=null?(t=An(t,this.localeData()),this.add(t-e,"d")):e}function Hn(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Bn(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=xn(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Gn(t){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||fs.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(S(this,"_weekdaysRegex")||(this._weekdaysRegex=$n),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Vn(t){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||fs.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(S(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jn),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zn(t){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||fs.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(S(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=In),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function fs(){function t(u,c){return c.length-u.length}var e=[],s=[],r=[],i=[],n,a,o,l,h;for(n=0;n<7;n++)a=re([2e3,1]).day(n),o=ue(this.weekdaysMin(a,"")),l=ue(this.weekdaysShort(a,"")),h=ue(this.weekdays(a,"")),e.push(o),s.push(l),r.push(h),i.push(o),i.push(l),i.push(h);e.sort(t),s.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function _s(){return this.hours()%12||12}function qn(){return this.hours()||24}m("H",["HH",2],0,"hour"),m("h",["hh",2],0,_s),m("k",["kk",2],0,qn),m("hmm",0,0,function(){return""+_s.apply(this)+ne(this.minutes(),2)}),m("hmmss",0,0,function(){return""+_s.apply(this)+ne(this.minutes(),2)+ne(this.seconds(),2)}),m("Hmm",0,0,function(){return""+this.hours()+ne(this.minutes(),2)}),m("Hmmss",0,0,function(){return""+this.hours()+ne(this.minutes(),2)+ne(this.seconds(),2)});function mr(t,e){m(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}mr("a",!0),mr("A",!1);function yr(t,e){return e._meridiemParse}p("a",yr),p("A",yr),p("H",x,us),p("h",x,Ye),p("k",x,Ye),p("HH",x,F),p("hh",x,F),p("kk",x,F),p("hmm",nr),p("hmmss",ar),p("Hmm",nr),p("Hmmss",ar),P(["H","HH"],j),P(["k","kk"],function(t,e,s){var r=v(t);e[j]=r===24?0:r}),P(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t}),P(["h","hh"],function(t,e,s){e[j]=v(t),g(s).bigHour=!0}),P("hmm",function(t,e,s){var r=t.length-2;e[j]=v(t.substr(0,r)),e[Z]=v(t.substr(r)),g(s).bigHour=!0}),P("hmmss",function(t,e,s){var r=t.length-4,i=t.length-2;e[j]=v(t.substr(0,r)),e[Z]=v(t.substr(r,2)),e[ce]=v(t.substr(i)),g(s).bigHour=!0}),P("Hmm",function(t,e,s){var r=t.length-2;e[j]=v(t.substr(0,r)),e[Z]=v(t.substr(r))}),P("Hmmss",function(t,e,s){var r=t.length-4,i=t.length-2;e[j]=v(t.substr(0,r)),e[Z]=v(t.substr(r,2)),e[ce]=v(t.substr(i))});function Jn(t){return(t+"").toLowerCase().charAt(0)==="p"}var Kn=/[ap]\.?m?\.?/i,Zn=Le("Hours",!0);function Qn(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var gr={calendar:Ui,longDateFormat:Hi,invalidDate:Gi,ordinal:zi,dayOfMonthOrdinalParse:qi,relativeTime:Ki,months:fn,monthsShort:ur,week:On,weekdays:Rn,weekdaysMin:Cn,weekdaysShort:pr,meridiemParse:Kn},C={},at={},ot;function Xn(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function wr(t){return t&&t.toLowerCase().replace("_","-")}function ea(t){for(var e=0,s,r,i,n;e<t.length;){for(n=wr(t[e]).split("-"),s=n.length,r=wr(t[e+1]),r=r?r.split("-"):null;s>0;){if(i=Mt(n.slice(0,s).join("-")),i)return i;if(r&&r.length>=s&&Xn(n,r)>=s-1)break;s--}e++}return ot}function ta(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Mt(t){var e=null,s;if(C[t]===void 0&&typeof module<"u"&&module&&module.exports&&ta(t))try{e=ot._abbr,s=require,s("./locale/"+t),we(e)}catch{C[t]=null}return C[t]}function we(t,e){var s;return t&&(L(e)?s=fe(t):s=ps(t,e),s?ot=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ot._abbr}function ps(t,e){if(e!==null){var s,r=gr;if(e.abbr=t,C[t]!=null)er("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=C[t]._config;else if(e.parentLocale!=null)if(C[e.parentLocale]!=null)r=C[e.parentLocale]._config;else if(s=Mt(e.parentLocale),s!=null)r=s._config;else return at[e.parentLocale]||(at[e.parentLocale]=[]),at[e.parentLocale].push({name:t,config:e}),null;return C[t]=new ss(ts(r,e)),at[t]&&at[t].forEach(function(i){ps(i.name,i.config)}),we(t),C[t]}else return delete C[t],null}function sa(t,e){if(e!=null){var s,r,i=gr;C[t]!=null&&C[t].parentLocale!=null?C[t].set(ts(C[t]._config,e)):(r=Mt(t),r!=null&&(i=r._config),e=ts(i,e),r==null&&(e.abbr=t),s=new ss(e),s.parentLocale=C[t],C[t]=s),we(t)}else C[t]!=null&&(C[t].parentLocale!=null?(C[t]=C[t].parentLocale,t===we()&&we(t)):C[t]!=null&&delete C[t]);return C[t]}function fe(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ot;if(!J(t)){if(e=Mt(t),e)return e;t=[t]}return ea(t)}function ra(){return rs(C)}function ms(t){var e,s=t._a;return s&&g(t).overflow===-2&&(e=s[he]<0||s[he]>11?he:s[ae]<1||s[ae]>cs(s[I],s[he])?ae:s[j]<0||s[j]>24||s[j]===24&&(s[Z]!==0||s[ce]!==0||s[De]!==0)?j:s[Z]<0||s[Z]>59?Z:s[ce]<0||s[ce]>59?ce:s[De]<0||s[De]>999?De:-1,g(t)._overflowDayOfYear&&(e<I||e>ae)&&(e=ae),g(t)._overflowWeeks&&e===-1&&(e=on),g(t)._overflowWeekday&&e===-1&&(e=ln),g(t).overflow=e),t}var ia=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,na=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aa=/Z|[+-]\d\d(?::?\d\d)?/,At=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ys=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],oa=/^\/?Date\((-?\d+)/i,la=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ua={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function vr(t){var e,s,r=t._i,i=ia.exec(r)||na.exec(r),n,a,o,l,h=At.length,u=ys.length;if(i){for(g(t).iso=!0,e=0,s=h;e<s;e++)if(At[e][1].exec(i[1])){a=At[e][0],n=At[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(i[3]){for(e=0,s=u;e<s;e++)if(ys[e][1].exec(i[3])){o=(i[2]||" ")+ys[e][0];break}if(o==null){t._isValid=!1;return}}if(!n&&o!=null){t._isValid=!1;return}if(i[4])if(aa.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=a+(o||"")+(l||""),ws(t)}else t._isValid=!1}function ha(t,e,s,r,i,n){var a=[ca(t),ur.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(i,10)];return n&&a.push(parseInt(n,10)),a}function ca(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function da(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function fa(t,e,s){if(t){var r=pr.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return g(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function _a(t,e,s){if(t)return ua[t];if(e)return 0;var r=parseInt(s,10),i=r%100,n=(r-i)/100;return n*60+i}function br(t){var e=la.exec(da(t._i)),s;if(e){if(s=ha(e[4],e[3],e[2],e[5],e[6],e[7]),!fa(e[1],s,t))return;t._a=s,t._tzm=_a(e[8],e[9],e[10]),t._d=it.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),g(t).rfc2822=!0}else t._isValid=!1}function pa(t){var e=oa.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(vr(t),t._isValid===!1)delete t._isValid;else return;if(br(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:_.createFromInputFallback(t)}_.createFromInputFallback=H("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ue(t,e,s){return t??e??s}function ma(t){var e=new Date(_.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function gs(t){var e,s,r=[],i,n,a;if(!t._d){for(i=ma(t),t._w&&t._a[ae]==null&&t._a[he]==null&&ya(t),t._dayOfYear!=null&&(a=Ue(t._a[I],i[I]),(t._dayOfYear>st(a)||t._dayOfYear===0)&&(g(t)._overflowDayOfYear=!0),s=it(a,0,t._dayOfYear),t._a[he]=s.getUTCMonth(),t._a[ae]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[j]===24&&t._a[Z]===0&&t._a[ce]===0&&t._a[De]===0&&(t._nextDay=!0,t._a[j]=0),t._d=(t._useUTC?it:Sn).apply(null,r),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[j]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==n&&(g(t).weekdayMismatch=!0)}}function ya(t){var e,s,r,i,n,a,o,l,h;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(n=1,a=4,s=Ue(e.GG,t._a[I],nt(R(),1,4).year),r=Ue(e.W,1),i=Ue(e.E,1),(i<1||i>7)&&(l=!0)):(n=t._locale._week.dow,a=t._locale._week.doy,h=nt(R(),n,a),s=Ue(e.gg,t._a[I],h.year),r=Ue(e.w,h.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+n,(e.e<0||e.e>6)&&(l=!0)):i=n),r<1||r>de(s,n,a)?g(t)._overflowWeeks=!0:l!=null?g(t)._overflowWeekday=!0:(o=_r(s,r,i,n,a),t._a[I]=o.year,t._dayOfYear=o.dayOfYear)}_.ISO_8601=function(){},_.RFC_2822=function(){};function ws(t){if(t._f===_.ISO_8601){vr(t);return}if(t._f===_.RFC_2822){br(t);return}t._a=[],g(t).empty=!0;var e=""+t._i,s,r,i,n,a,o=e.length,l=0,h,u;for(i=tr(t._f,t._locale).match(is)||[],u=i.length,s=0;s<u;s++)n=i[s],r=(e.match(rn(n,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&g(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),l+=r.length),je[n]?(r?g(t).empty=!1:g(t).unusedTokens.push(n),an(n,r,t)):t._strict&&!r&&g(t).unusedTokens.push(n);g(t).charsLeftOver=o-l,e.length>0&&g(t).unusedInput.push(e),t._a[j]<=12&&g(t).bigHour===!0&&t._a[j]>0&&(g(t).bigHour=void 0),g(t).parsedDateParts=t._a.slice(0),g(t).meridiem=t._meridiem,t._a[j]=ga(t._locale,t._a[j],t._meridiem),h=g(t).era,h!==null&&(t._a[I]=t._locale.erasConvertYear(h,t._a[I])),gs(t),ms(t)}function ga(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function wa(t){var e,s,r,i,n,a,o=!1,l=t._f.length;if(l===0){g(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)n=0,a=!1,e=es({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],ws(e),Qt(e)&&(a=!0),n+=g(e).charsLeftOver,n+=g(e).unusedTokens.length*10,g(e).score=n,o?n<r&&(r=n,s=e):(r==null||n<r||a)&&(r=n,s=e,a&&(o=!0));ge(t,s||e)}function va(t){if(!t._d){var e=as(t._i),s=e.day===void 0?e.date:e.day;t._a=Ks([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),gs(t)}}function ba(t){var e=new Xe(ms(kr(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function kr(t){var e=t._i,s=t._f;return t._locale=t._locale||fe(t._l),e===null||s===void 0&&e===""?gt({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),K(e)?new Xe(ms(e)):(Qe(e)?t._d=e:J(s)?wa(t):s?ws(t):ka(t),Qt(t)||(t._d=null),t))}function ka(t){var e=t._i;L(e)?t._d=new Date(_.now()):Qe(e)?t._d=new Date(e.valueOf()):typeof e=="string"?pa(t):J(e)?(t._a=Ks(e.slice(0),function(s){return parseInt(s,10)}),gs(t)):Oe(e)?va(t):le(e)?t._d=new Date(e):_.createFromInputFallback(t)}function Sr(t,e,s,r,i){var n={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Oe(t)&&Kt(t)||J(t)&&t.length===0)&&(t=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=i,n._l=s,n._i=t,n._f=e,n._strict=r,ba(n)}function R(t,e,s,r){return Sr(t,e,s,r,!1)}var Sa=H("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=R.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:gt()}),Ta=H("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=R.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:gt()});function Tr(t,e){var s,r;if(e.length===1&&J(e[0])&&(e=e[0]),!e.length)return R();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function Oa(){var t=[].slice.call(arguments,0);return Tr("isBefore",t)}function Da(){var t=[].slice.call(arguments,0);return Tr("isAfter",t)}var Pa=function(){return Date.now?Date.now():+new Date},lt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ea(t){var e,s=!1,r,i=lt.length;for(e in t)if(S(t,e)&&!($.call(lt,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[lt[r]]){if(s)return!1;parseFloat(t[lt[r]])!==v(t[lt[r]])&&(s=!0)}return!0}function Ma(){return this._isValid}function Aa(){return Q(NaN)}function xt(t){var e=as(t),s=e.year||0,r=e.quarter||0,i=e.month||0,n=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,l=e.minute||0,h=e.second||0,u=e.millisecond||0;this._isValid=Ea(e),this._milliseconds=+u+h*1e3+l*6e4+o*1e3*60*60,this._days=+a+n*7,this._months=+i+r*3+s*12,this._data={},this._locale=fe(),this._bubble()}function Rt(t){return t instanceof xt}function vs(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function xa(t,e,s){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),n=0,a;for(a=0;a<r;a++)v(t[a])!==v(e[a])&&n++;return n+i}function Or(t,e){m(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+ne(~~(s/60),2)+e+ne(~~s%60,2)})}Or("Z",":"),Or("ZZ",""),p("Z",Ot),p("ZZ",Ot),P(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=bs(Ot,t)});var Ra=/([\+\-]|\d\d)/gi;function bs(t,e){var s=(e||"").match(t),r,i,n;return s===null?null:(r=s[s.length-1]||[],i=(r+"").match(Ra)||["-",0,0],n=+(i[1]*60)+v(i[2]),n===0?0:i[0]==="+"?n:-n)}function ks(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(K(t)||Qe(t)?t.valueOf():R(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),_.updateOffset(s,!1),s):R(t).local()}function Ss(t){return-Math.round(t._d.getTimezoneOffset())}_.updateOffset=function(){};function Ca(t,e,s){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=bs(Ot,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(i=Ss(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Mr(this,Q(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Ss(this)}function $a(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function ja(t){return this.utcOffset(0,t)}function Ia(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ss(this),"m")),this}function Ya(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=bs(tn,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function La(t){return this.isValid()?(t=t?R(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Ua(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Na(){if(!L(this._isDSTShifted))return this._isDSTShifted;var t={},e;return es(t,this),t=kr(t),t._a?(e=t._isUTC?re(t._a):R(t._a),this._isDSTShifted=this.isValid()&&xa(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Fa(){return this.isValid()?!this._isUTC:!1}function Wa(){return this.isValid()?this._isUTC:!1}function Dr(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ha=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ba=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Q(t,e){var s=t,r=null,i,n,a;return Rt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:le(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=Ha.exec(t))?(i=r[1]==="-"?-1:1,s={y:0,d:v(r[ae])*i,h:v(r[j])*i,m:v(r[Z])*i,s:v(r[ce])*i,ms:v(vs(r[De]*1e3))*i}):(r=Ba.exec(t))?(i=r[1]==="-"?-1:1,s={y:Pe(r[2],i),M:Pe(r[3],i),w:Pe(r[4],i),d:Pe(r[5],i),h:Pe(r[6],i),m:Pe(r[7],i),s:Pe(r[8],i)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=Ga(R(s.from),R(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),n=new xt(s),Rt(t)&&S(t,"_locale")&&(n._locale=t._locale),Rt(t)&&S(t,"_isValid")&&(n._isValid=t._isValid),n}Q.fn=xt.prototype,Q.invalid=Aa;function Pe(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Pr(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Ga(t,e){var s;return t.isValid()&&e.isValid()?(e=ks(e,t),t.isBefore(e)?s=Pr(t,e):(s=Pr(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Er(t,e){return function(s,r){var i,n;return r!==null&&!isNaN(+r)&&(er(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=s,s=r,r=n),i=Q(s,r),Mr(this,i,t),this}}function Mr(t,e,s,r){var i=e._milliseconds,n=vs(e._days),a=vs(e._months);t.isValid()&&(r=r??!0,a&&cr(t,rt(t,"Month")+a*s),n&&lr(t,"Date",rt(t,"Date")+n*s),i&&t._d.setTime(t._d.valueOf()+i*s),r&&_.updateOffset(t,n||a))}var Va=Er(1,"add"),za=Er(-1,"subtract");function Ar(t){return typeof t=="string"||t instanceof String}function qa(t){return K(t)||Qe(t)||Ar(t)||le(t)||Ka(t)||Ja(t)||t===null||t===void 0}function Ja(t){var e=Oe(t)&&!Kt(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,n,a=r.length;for(i=0;i<a;i+=1)n=r[i],s=s||S(t,n);return e&&s}function Ka(t){var e=J(t),s=!1;return e&&(s=t.filter(function(r){return!le(r)&&Ar(t)}).length===0),e&&s}function Za(t){var e=Oe(t)&&!Kt(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,n;for(i=0;i<r.length;i+=1)n=r[i],s=s||S(t,n);return e&&s}function Qa(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Xa(t,e){arguments.length===1&&(arguments[0]?qa(arguments[0])?(t=arguments[0],e=void 0):Za(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||R(),r=ks(s,this).startOf("day"),i=_.calendarFormat(this,r)||"sameElse",n=e&&(ie(e[i])?e[i].call(this,s):e[i]);return this.format(n||this.localeData().calendar(i,this,R(s)))}function eo(){return new Xe(this)}function to(t,e){var s=K(t)?t:R(t);return this.isValid()&&s.isValid()?(e=B(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function so(t,e){var s=K(t)?t:R(t);return this.isValid()&&s.isValid()?(e=B(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function ro(t,e,s,r){var i=K(t)?t:R(t),n=K(e)?e:R(e);return this.isValid()&&i.isValid()&&n.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,s):!this.isBefore(i,s))&&(r[1]===")"?this.isBefore(n,s):!this.isAfter(n,s))):!1}function io(t,e){var s=K(t)?t:R(t),r;return this.isValid()&&s.isValid()?(e=B(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function no(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function ao(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function oo(t,e,s){var r,i,n;if(!this.isValid())return NaN;if(r=ks(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=B(e),e){case"year":n=Ct(this,r)/12;break;case"month":n=Ct(this,r);break;case"quarter":n=Ct(this,r)/3;break;case"second":n=(this-r)/1e3;break;case"minute":n=(this-r)/6e4;break;case"hour":n=(this-r)/36e5;break;case"day":n=(this-r-i)/864e5;break;case"week":n=(this-r-i)/6048e5;break;default:n=this-r}return s?n:G(n)}function Ct(t,e){if(t.date()<e.date())return-Ct(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),i,n;return e-r<0?(i=t.clone().add(s-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(s+1,"months"),n=(e-r)/(i-r)),-(s+n)||0}_.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",_.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function lo(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function uo(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?vt(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ie(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",vt(s,"Z")):vt(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ho(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,i,n;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=e+'[")]',this.format(s+r+i+n)}function co(t){t||(t=this.isUtc()?_.defaultFormatUtc:_.defaultFormat);var e=vt(this,t);return this.localeData().postformat(e)}function fo(t,e){return this.isValid()&&(K(t)&&t.isValid()||R(t).isValid())?Q({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _o(t){return this.from(R(),t)}function po(t,e){return this.isValid()&&(K(t)&&t.isValid()||R(t).isValid())?Q({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function mo(t){return this.to(R(),t)}function xr(t){var e;return t===void 0?this._locale._abbr:(e=fe(t),e!=null&&(this._locale=e),this)}var Rr=H("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Cr(){return this._locale}var $t=1e3,Ne=60*$t,jt=60*Ne,$r=(365*400+97)*24*jt;function Fe(t,e){return(t%e+e)%e}function jr(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-$r:new Date(t,e,s).valueOf()}function Ir(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-$r:Date.UTC(t,e,s)}function yo(t){var e,s;if(t=B(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ir:jr,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Fe(e+(this._isUTC?0:this.utcOffset()*Ne),jt);break;case"minute":e=this._d.valueOf(),e-=Fe(e,Ne);break;case"second":e=this._d.valueOf(),e-=Fe(e,$t);break}return this._d.setTime(e),_.updateOffset(this,!0),this}function go(t){var e,s;if(t=B(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ir:jr,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=jt-Fe(e+(this._isUTC?0:this.utcOffset()*Ne),jt)-1;break;case"minute":e=this._d.valueOf(),e+=Ne-Fe(e,Ne)-1;break;case"second":e=this._d.valueOf(),e+=$t-Fe(e,$t)-1;break}return this._d.setTime(e),_.updateOffset(this,!0),this}function wo(){return this._d.valueOf()-(this._offset||0)*6e4}function vo(){return Math.floor(this.valueOf()/1e3)}function bo(){return new Date(this.valueOf())}function ko(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function So(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function To(){return this.isValid()?this.toISOString():null}function Oo(){return Qt(this)}function Do(){return ge({},g(this))}function Po(){return g(this).overflow}function Eo(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}m("N",0,0,"eraAbbr"),m("NN",0,0,"eraAbbr"),m("NNN",0,0,"eraAbbr"),m("NNNN",0,0,"eraName"),m("NNNNN",0,0,"eraNarrow"),m("y",["y",1],"yo","eraYear"),m("y",["yy",2],0,"eraYear"),m("y",["yyy",3],0,"eraYear"),m("y",["yyyy",4],0,"eraYear"),p("N",Ts),p("NN",Ts),p("NNN",Ts),p("NNNN",Uo),p("NNNNN",No),P(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var i=s._locale.erasParse(t,r,s._strict);i?g(s).era=i:g(s).invalidEra=t}),p("y",Ie),p("yy",Ie),p("yyy",Ie),p("yyyy",Ie),p("yo",Fo),P(["y","yy","yyy","yyyy"],I),P(["yo"],function(t,e,s,r){var i;s._locale._eraYearOrdinalRegex&&(i=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[I]=s._locale.eraYearOrdinalParse(t,i):e[I]=parseInt(t,10)});function Mo(t,e){var s,r,i,n=this._eras||fe("en")._eras;for(s=0,r=n.length;s<r;++s){switch(typeof n[s].since){case"string":i=_(n[s].since).startOf("day"),n[s].since=i.valueOf();break}switch(typeof n[s].until){case"undefined":n[s].until=1/0;break;case"string":i=_(n[s].until).startOf("day").valueOf(),n[s].until=i.valueOf();break}}return n}function Ao(t,e,s){var r,i,n=this.eras(),a,o,l;for(t=t.toUpperCase(),r=0,i=n.length;r<i;++r)if(a=n[r].name.toUpperCase(),o=n[r].abbr.toUpperCase(),l=n[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(o===t)return n[r];break;case"NNNN":if(a===t)return n[r];break;case"NNNNN":if(l===t)return n[r];break}else if([a,o,l].indexOf(t)>=0)return n[r]}function xo(t,e){var s=t.since<=t.until?1:-1;return e===void 0?_(t.since).year():_(t.since).year()+(e-t.offset)*s}function Ro(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function Co(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function $o(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function jo(){var t,e,s,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(s=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-_(i[t].since).year())*s+i[t].offset;return this.year()}function Io(t){return S(this,"_erasNameRegex")||Os.call(this),t?this._erasNameRegex:this._erasRegex}function Yo(t){return S(this,"_erasAbbrRegex")||Os.call(this),t?this._erasAbbrRegex:this._erasRegex}function Lo(t){return S(this,"_erasNarrowRegex")||Os.call(this),t?this._erasNarrowRegex:this._erasRegex}function Ts(t,e){return e.erasAbbrRegex(t)}function Uo(t,e){return e.erasNameRegex(t)}function No(t,e){return e.erasNarrowRegex(t)}function Fo(t,e){return e._eraYearOrdinalRegex||Ie}function Os(){var t=[],e=[],s=[],r=[],i,n,a,o,l,h=this.eras();for(i=0,n=h.length;i<n;++i)a=ue(h[i].name),o=ue(h[i].abbr),l=ue(h[i].narrow),e.push(a),t.push(o),s.push(l),r.push(a),r.push(o),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}m(0,["gg",2],0,function(){return this.weekYear()%100}),m(0,["GG",2],0,function(){return this.isoWeekYear()%100});function It(t,e){m(0,[t,t.length],0,e)}It("gggg","weekYear"),It("ggggg","weekYear"),It("GGGG","isoWeekYear"),It("GGGGG","isoWeekYear"),p("G",Tt),p("g",Tt),p("GG",x,F),p("gg",x,F),p("GGGG",ls,os),p("gggg",ls,os),p("GGGGG",St,bt),p("ggggg",St,bt),tt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=v(t)}),tt(["gg","GG"],function(t,e,s,r){e[r]=_.parseTwoDigitYear(t)});function Wo(t){return Yr.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ho(t){return Yr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Bo(){return de(this.year(),1,4)}function Go(){return de(this.isoWeekYear(),1,4)}function Vo(){var t=this.localeData()._week;return de(this.year(),t.dow,t.doy)}function zo(){var t=this.localeData()._week;return de(this.weekYear(),t.dow,t.doy)}function Yr(t,e,s,r,i){var n;return t==null?nt(this,r,i).year:(n=de(t,r,i),e>n&&(e=n),qo.call(this,t,e,s,r,i))}function qo(t,e,s,r,i){var n=_r(t,e,s,r,i),a=it(n.year,0,n.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}m("Q",0,"Qo","quarter"),p("Q",rr),P("Q",function(t,e){e[he]=(v(t)-1)*3});function Jo(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}m("D",["DD",2],"Do","date"),p("D",x,Ye),p("DD",x,F),p("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),P(["D","DD"],ae),P("Do",function(t,e){e[ae]=v(t.match(x)[0])});var Lr=Le("Date",!0);m("DDD",["DDDD",3],"DDDo","dayOfYear"),p("DDD",kt),p("DDDD",ir),P(["DDD","DDDD"],function(t,e,s){s._dayOfYear=v(t)});function Ko(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}m("m",["mm",2],0,"minute"),p("m",x,us),p("mm",x,F),P(["m","mm"],Z);var Zo=Le("Minutes",!1);m("s",["ss",2],0,"second"),p("s",x,us),p("ss",x,F),P(["s","ss"],ce);var Qo=Le("Seconds",!1);m("S",0,0,function(){return~~(this.millisecond()/100)}),m(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),m(0,["SSS",3],0,"millisecond"),m(0,["SSSS",4],0,function(){return this.millisecond()*10}),m(0,["SSSSS",5],0,function(){return this.millisecond()*100}),m(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),m(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),m(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),m(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),p("S",kt,rr),p("SS",kt,F),p("SSS",kt,ir);var ve,Ur;for(ve="SSSS";ve.length<=9;ve+="S")p(ve,Ie);function Xo(t,e){e[De]=v(("0."+t)*1e3)}for(ve="S";ve.length<=9;ve+="S")P(ve,Xo);Ur=Le("Milliseconds",!1),m("z",0,0,"zoneAbbr"),m("zz",0,0,"zoneName");function el(){return this._isUTC?"UTC":""}function tl(){return this._isUTC?"Coordinated Universal Time":""}var d=Xe.prototype;d.add=Va,d.calendar=Xa,d.clone=eo,d.diff=oo,d.endOf=go,d.format=co,d.from=fo,d.fromNow=_o,d.to=po,d.toNow=mo,d.get=hn,d.invalidAt=Po,d.isAfter=to,d.isBefore=so,d.isBetween=ro,d.isSame=io,d.isSameOrAfter=no,d.isSameOrBefore=ao,d.isValid=Oo,d.lang=Rr,d.locale=xr,d.localeData=Cr,d.max=Ta,d.min=Sa,d.parsingFlags=Do,d.set=cn,d.startOf=yo,d.subtract=za,d.toArray=ko,d.toObject=So,d.toDate=bo,d.toISOString=uo,d.inspect=ho,typeof Symbol<"u"&&Symbol.for!=null&&(d[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),d.toJSON=To,d.toString=lo,d.unix=vo,d.valueOf=wo,d.creationData=Eo,d.eraName=Ro,d.eraNarrow=Co,d.eraAbbr=$o,d.eraYear=jo,d.year=or,d.isLeapYear=un,d.weekYear=Wo,d.isoWeekYear=Ho,d.quarter=d.quarters=Jo,d.month=dr,d.daysInMonth=vn,d.week=d.weeks=En,d.isoWeek=d.isoWeeks=Mn,d.weeksInYear=Vo,d.weeksInWeekYear=zo,d.isoWeeksInYear=Bo,d.isoWeeksInISOWeekYear=Go,d.date=Lr,d.day=d.days=Wn,d.weekday=Hn,d.isoWeekday=Bn,d.dayOfYear=Ko,d.hour=d.hours=Zn,d.minute=d.minutes=Zo,d.second=d.seconds=Qo,d.millisecond=d.milliseconds=Ur,d.utcOffset=Ca,d.utc=ja,d.local=Ia,d.parseZone=Ya,d.hasAlignedHourOffset=La,d.isDST=Ua,d.isLocal=Fa,d.isUtcOffset=Wa,d.isUtc=Dr,d.isUTC=Dr,d.zoneAbbr=el,d.zoneName=tl,d.dates=H("dates accessor is deprecated. Use date instead.",Lr),d.months=H("months accessor is deprecated. Use month instead",dr),d.years=H("years accessor is deprecated. Use year instead",or),d.zone=H("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",$a),d.isDSTShifted=H("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Na);function sl(t){return R(t*1e3)}function rl(){return R.apply(null,arguments).parseZone()}function Nr(t){return t}var T=ss.prototype;T.calendar=Ni,T.longDateFormat=Bi,T.invalidDate=Vi,T.ordinal=Ji,T.preparse=Nr,T.postformat=Nr,T.relativeTime=Zi,T.pastFuture=Qi,T.set=Li,T.eras=Mo,T.erasParse=Ao,T.erasConvertYear=xo,T.erasAbbrRegex=Yo,T.erasNameRegex=Io,T.erasNarrowRegex=Lo,T.months=mn,T.monthsShort=yn,T.monthsParse=wn,T.monthsRegex=kn,T.monthsShortRegex=bn,T.week=Tn,T.firstDayOfYear=Pn,T.firstDayOfWeek=Dn,T.weekdays=Yn,T.weekdaysMin=Un,T.weekdaysShort=Ln,T.weekdaysParse=Fn,T.weekdaysRegex=Gn,T.weekdaysShortRegex=Vn,T.weekdaysMinRegex=zn,T.isPM=Jn,T.meridiem=Qn;function Yt(t,e,s,r){var i=fe(),n=re().set(r,e);return i[s](n,t)}function Fr(t,e,s){if(le(t)&&(e=t,t=void 0),t=t||"",e!=null)return Yt(t,e,s,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Yt(t,r,s,"month");return i}function Ds(t,e,s,r){typeof t=="boolean"?(le(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,le(e)&&(s=e,e=void 0),e=e||"");var i=fe(),n=t?i._week.dow:0,a,o=[];if(s!=null)return Yt(e,(s+n)%7,r,"day");for(a=0;a<7;a++)o[a]=Yt(e,(a+n)%7,r,"day");return o}function il(t,e){return Fr(t,e,"months")}function nl(t,e){return Fr(t,e,"monthsShort")}function al(t,e,s){return Ds(t,e,s,"weekdays")}function ol(t,e,s){return Ds(t,e,s,"weekdaysShort")}function ll(t,e,s){return Ds(t,e,s,"weekdaysMin")}we("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=v(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}}),_.lang=H("moment.lang is deprecated. Use moment.locale instead.",we),_.langData=H("moment.langData is deprecated. Use moment.localeData instead.",fe);var _e=Math.abs;function ul(){var t=this._data;return this._milliseconds=_e(this._milliseconds),this._days=_e(this._days),this._months=_e(this._months),t.milliseconds=_e(t.milliseconds),t.seconds=_e(t.seconds),t.minutes=_e(t.minutes),t.hours=_e(t.hours),t.months=_e(t.months),t.years=_e(t.years),this}function Wr(t,e,s,r){var i=Q(e,s);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function hl(t,e){return Wr(this,t,e,1)}function cl(t,e){return Wr(this,t,e,-1)}function Hr(t){return t<0?Math.floor(t):Math.ceil(t)}function dl(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,i,n,a,o,l;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=Hr(Ps(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,i=G(t/1e3),r.seconds=i%60,n=G(i/60),r.minutes=n%60,a=G(n/60),r.hours=a%24,e+=G(a/24),l=G(Br(e)),s+=l,e-=Hr(Ps(l)),o=G(s/12),s%=12,r.days=e,r.months=s,r.years=o,this}function Br(t){return t*4800/146097}function Ps(t){return t*146097/4800}function fl(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=B(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+Br(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(Ps(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function pe(t){return function(){return this.as(t)}}var Gr=pe("ms"),_l=pe("s"),pl=pe("m"),ml=pe("h"),yl=pe("d"),gl=pe("w"),wl=pe("M"),vl=pe("Q"),bl=pe("y"),kl=Gr;function Sl(){return Q(this)}function Tl(t){return t=B(t),this.isValid()?this[t+"s"]():NaN}function Ee(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ol=Ee("milliseconds"),Dl=Ee("seconds"),Pl=Ee("minutes"),El=Ee("hours"),Ml=Ee("days"),Al=Ee("months"),xl=Ee("years");function Rl(){return G(this.days()/7)}var me=Math.round,We={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Cl(t,e,s,r,i){return i.relativeTime(e||1,!!s,t,r)}function $l(t,e,s,r){var i=Q(t).abs(),n=me(i.as("s")),a=me(i.as("m")),o=me(i.as("h")),l=me(i.as("d")),h=me(i.as("M")),u=me(i.as("w")),c=me(i.as("y")),f=n<=s.ss&&["s",n]||n<s.s&&["ss",n]||a<=1&&["m"]||a<s.m&&["mm",a]||o<=1&&["h"]||o<s.h&&["hh",o]||l<=1&&["d"]||l<s.d&&["dd",l];return s.w!=null&&(f=f||u<=1&&["w"]||u<s.w&&["ww",u]),f=f||h<=1&&["M"]||h<s.M&&["MM",h]||c<=1&&["y"]||["yy",c],f[2]=e,f[3]=+t>0,f[4]=r,Cl.apply(null,f)}function jl(t){return t===void 0?me:typeof t=="function"?(me=t,!0):!1}function Il(t,e){return We[t]===void 0?!1:e===void 0?We[t]:(We[t]=e,t==="s"&&(We.ss=e-1),!0)}function Yl(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=We,i,n;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},We,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),n=$l(this,!s,r,i),s&&(n=i.pastFuture(+this,n)),i.postformat(n)}var Es=Math.abs;function He(t){return(t>0)-(t<0)||+t}function Lt(){if(!this.isValid())return this.localeData().invalidDate();var t=Es(this._milliseconds)/1e3,e=Es(this._days),s=Es(this._months),r,i,n,a,o=this.asSeconds(),l,h,u,c;return o?(r=G(t/60),i=G(r/60),t%=60,r%=60,n=G(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",h=He(this._months)!==He(o)?"-":"",u=He(this._days)!==He(o)?"-":"",c=He(this._milliseconds)!==He(o)?"-":"",l+"P"+(n?h+n+"Y":"")+(s?h+s+"M":"")+(e?u+e+"D":"")+(i||r||t?"T":"")+(i?c+i+"H":"")+(r?c+r+"M":"")+(t?c+a+"S":"")):"P0D"}var k=xt.prototype;k.isValid=Ma,k.abs=ul,k.add=hl,k.subtract=cl,k.as=fl,k.asMilliseconds=Gr,k.asSeconds=_l,k.asMinutes=pl,k.asHours=ml,k.asDays=yl,k.asWeeks=gl,k.asMonths=wl,k.asQuarters=vl,k.asYears=bl,k.valueOf=kl,k._bubble=dl,k.clone=Sl,k.get=Tl,k.milliseconds=Ol,k.seconds=Dl,k.minutes=Pl,k.hours=El,k.days=Ml,k.weeks=Rl,k.months=Al,k.years=xl,k.humanize=Yl,k.toISOString=Lt,k.toString=Lt,k.toJSON=Lt,k.locale=xr,k.localeData=Cr,k.toIsoString=H("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Lt),k.lang=Rr,m("X",0,0,"unix"),m("x",0,0,"valueOf"),p("x",Tt),p("X",sn),P("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)}),P("x",function(t,e,s){s._d=new Date(v(t))});//! moment.js
_.version="2.30.1",Ii(R),_.fn=d,_.min=Oa,_.max=Da,_.now=Pa,_.utc=re,_.unix=sl,_.months=il,_.isDate=Qe,_.locale=we,_.invalid=gt,_.duration=Q,_.isMoment=K,_.weekdays=al,_.parseZone=rl,_.localeData=fe,_.isDuration=Rt,_.monthsShort=nl,_.weekdaysMin=ll,_.defineLocale=ps,_.updateLocale=sa,_.locales=ra,_.weekdaysShort=ol,_.normalizeUnits=B,_.relativeTimeRounding=jl,_.relativeTimeThreshold=Il,_.calendarFormat=Qa,_.prototype=d,_.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Ms(){return"2.0.2"}const Ll=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Promise.resolve().then(()=>Ge).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class As extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Vr extends As{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zr extends As{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qr extends As{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xs||(xs={}));var Ul=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};class Nl{constructor(e,{headers:s={},customFetch:r,region:i=xs.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=Ll(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Ul(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:a}=s;let o={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let h;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:h}).catch(O=>{throw new Vr(O)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new zr(u);if(!u.ok)throw new qr(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield u.json():f==="application/octet-stream"?y=yield u.blob():f==="text/event-stream"?y=u:f==="multipart/form-data"?y=yield u.formData():y=yield u.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wl(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),s}var z={},Rs={},Ut={},ut={},Nt={},Ft={},Hl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Be=Hl();const Bl=Be.fetch,Jr=Be.fetch.bind(Be),Kr=Be.Headers,Gl=Be.Request,Vl=Be.Response,Ge=Object.freeze(Object.defineProperty({__proto__:null,Headers:Kr,Request:Gl,Response:Vl,default:Jr,fetch:Bl},Symbol.toStringTag,{value:"Module"})),zl=Wl(Ge);var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});class ql extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Cs.default=ql;var Zr=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ft,"__esModule",{value:!0});const Jl=Zr(zl),Kl=Zr(Cs);let Zl=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Jl.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,l;let h=null,u=null,c=null,f=n.status,y=n.statusText;if(n.ok){if(this.method!=="HEAD"){const U=await n.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=U:u=JSON.parse(U))}const M=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),D=(o=n.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");M&&D&&D.length>1&&(c=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(h={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,c=null,f=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const M=await n.text();try{h=JSON.parse(M),Array.isArray(h)&&n.status===404&&(u=[],h=null,f=200,y="OK")}catch{n.status===404&&M===""?(f=204,y="No Content"):h={message:M}}if(h&&this.isMaybeSingle&&(!((l=h==null?void 0:h.details)===null||l===void 0)&&l.includes("0 rows"))&&(h=null,f=200,y="OK"),h&&this.shouldThrowOnError)throw new Kl.default(h)}return{error:h,data:u,count:c,status:f,statusText:y}});return this.shouldThrowOnError||(i=i.catch(n=>{var a,o,l;return{error:{message:`${(a=n==null?void 0:n.name)!==null&&a!==void 0?a:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(o=n==null?void 0:n.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=n==null?void 0:n.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}};Ft.default=Zl;var Ql=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nt,"__esModule",{value:!0});const Xl=Ql(Ft);let eu=class extends Xl.default{select(e){let s=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:i,referencedTable:n=i}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:i=r}={}){const n=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:i=!1,wal:n=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),h=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${h}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Nt.default=eu;var tu=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ut,"__esModule",{value:!0});const su=tu(Nt);let ru=class extends su.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};ut.default=ru;var iu=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});const ht=iu(ut);let nu=class{constructor(e,{headers:s={},schema:r,fetch:i}){this.url=e,this.headers=s,this.schema=r,this.fetch=i}select(e,{head:s=!1,count:r}={}){const i=s?"HEAD":"GET";let n=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new ht.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new ht.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(l.length>0){const h=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",h.join(","))}}return new ht.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new ht.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ht.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ut.default=nu;var Wt={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.version=void 0,Ht.version="0.0.0-automated",Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.DEFAULT_HEADERS=void 0;const au=Ht;Wt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${au.version}`};var Qr=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rs,"__esModule",{value:!0});const ou=Qr(Ut),lu=Qr(ut),uu=Wt;let hu=class ji{constructor(e,{headers:s={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},uu.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new ou.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ji(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:i=!1,count:n}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;r||i?(a=r?"HEAD":"GET",Object.entries(s).filter(([u,c])=>c!==void 0).map(([u,c])=>[u,Array.isArray(c)?`{${c.join(",")}}`:`${c}`]).forEach(([u,c])=>{o.searchParams.append(u,c)})):(a="POST",l=s);const h=Object.assign({},this.headers);return n&&(h.Prefer=`count=${n}`),new lu.default({method:a,url:o,headers:h,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Rs.default=hu;var ct=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(z,"__esModule",{value:!0}),z.PostgrestBuilder=z.PostgrestTransformBuilder=z.PostgrestFilterBuilder=z.PostgrestQueryBuilder=z.PostgrestClient=void 0;const Xr=ct(Rs);z.PostgrestClient=Xr.default;const ei=ct(Ut);z.PostgrestQueryBuilder=ei.default;const ti=ct(ut);z.PostgrestFilterBuilder=ti.default;const si=ct(Nt);z.PostgrestTransformBuilder=si.default;const ri=ct(Ft);z.PostgrestBuilder=ri.default;var cu=z.default={PostgrestClient:Xr.default,PostgrestQueryBuilder:ei.default,PostgrestFilterBuilder:ti.default,PostgrestTransformBuilder:si.default,PostgrestBuilder:ri.default};const{PostgrestClient:du,PostgrestQueryBuilder:Hh,PostgrestFilterBuilder:Bh,PostgrestTransformBuilder:Gh,PostgrestBuilder:Vh}=cu,fu={"X-Client-Info":"realtime-js/2.10.2"},_u="1.0.0",ii=1e4,pu=1e3;var Ve;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ve||(Ve={}));var W;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(W||(W={}));var X;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(X||(X={}));var $s;(function(t){t.websocket="websocket"})($s||($s={}));var Me;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Me||(Me={}));class mu{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const i=s.getUint8(1),n=s.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+n));a=a+n;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:h}}}class ni{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var A;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(A||(A={}));const ai=(t,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,a)=>(n[a]=yu(a,t,e,i),n),{})},yu=(t,e,s,r)=>{const i=e.find(o=>o.name===t),n=i==null?void 0:i.type,a=s[t];return n&&!r.includes(n)?oi(n,a):js(a)},oi=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return bu(e,s)}switch(t){case A.bool:return gu(e);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return wu(e);case A.json:case A.jsonb:return vu(e);case A.timestamp:return ku(e);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:return js(e);default:return js(e)}},js=t=>t,gu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wu=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},bu=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let n;const a=t.slice(1,s);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>oi(e,o))}return t},ku=t=>typeof t=="string"?t.replace(" ","T"):t,li=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Is{constructor(e,s,r={},i=ii){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ui;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ui||(ui={}));class dt{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dt.syncState(this.state,i,n,a),this.pendingDiffs.forEach(l=>{this.state=dt.syncDiff(this.state,l,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=dt.syncDiff(this.state,i,n,a),o())}),this.onJoin((i,n,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:a})}),this.onLeave((i,n,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const n=this.cloneDeep(e),a=this.transformState(s),o={},l={};return this.map(n,(h,u)=>{a[h]||(l[h]=u)}),this.map(a,(h,u)=>{const c=n[h];if(c){const f=u.map(D=>D.presence_ref),y=c.map(D=>D.presence_ref),O=u.filter(D=>y.indexOf(D.presence_ref)<0),M=c.filter(D=>f.indexOf(D.presence_ref)<0);O.length>0&&(o[h]=O),M.length>0&&(l[h]=M)}else o[h]=u}),this.syncDiff(n,{joins:o,leaves:l},r,i)}static syncDiff(e,s,r,i){const{joins:n,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(o,l)=>{var h;const u=(h=e[o])!==null&&h!==void 0?h:[];if(e[o]=this.cloneDeep(l),u.length>0){const c=e[o].map(y=>y.presence_ref),f=u.filter(y=>c.indexOf(y.presence_ref)<0);e[o].unshift(...f)}r(o,u,l)}),this.map(a,(o,l)=>{let h=e[o];if(!h)return;const u=l.map(c=>c.presence_ref);h=h.filter(c=>u.indexOf(c.presence_ref)<0),e[o]=h,i(o,h,l),h.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hi||(hi={}));var ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ci||(ci={}));var di;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(di||(di={}));class Ys{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=W.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Is(this,X.join,this.params,this.timeout),this.rejoinTimer=new ni(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=W.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this._on(X.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new dt(this),this.broadcastEndpointURL=li(this.socket.endPoint)+"/api/broadcast"}subscribe(e,s=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:a,private:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},h={broadcast:n,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:h},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,y=(c=f==null?void 0:f.length)!==null&&c!==void 0?c:0,O=[];for(let M=0;M<y;M++){const D=f[M],{filter:{event:U,schema:ye,table:oe,filter:te}}=D,se=u&&u[M];if(se&&se.event===U&&se.schema===ye&&se.table===oe&&se.filter===te)O.push(Object.assign(Object.assign({},D),{id:se.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,l;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&n("ok"),h.receive("ok",()=>n("ok")),h.receive("error",()=>n("error")),h.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=W.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(X.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Is(this,X.leave,{},e);i.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,s,r){const i=new AbortController,n=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(n),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Is(this,e,s,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,n;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:h,join:u}=X;if(r&&[o,l,h,u].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var O,M,D;return((O=y.filter)===null||O===void 0?void 0:O.event)==="*"||((D=(M=y.filter)===null||M===void 0?void 0:M.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===a}).map(y=>y.callback(f,r)):(n=this.bindings[a])===null||n===void 0||n.filter(y=>{var O,M,D,U,ye,oe;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const te=y.id,se=(O=y.filter)===null||O===void 0?void 0:O.event;return te&&((M=s.ids)===null||M===void 0?void 0:M.includes(te))&&(se==="*"||(se==null?void 0:se.toLocaleLowerCase())===((D=s.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const te=(ye=(U=y==null?void 0:y.filter)===null||U===void 0?void 0:U.event)===null||ye===void 0?void 0:ye.toLocaleLowerCase();return te==="*"||te===((oe=s==null?void 0:s.event)===null||oe===void 0?void 0:oe.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof f=="object"&&"ids"in f){const O=f.data,{schema:M,table:D,commit_timestamp:U,type:ye,errors:oe}=O;f=Object.assign(Object.assign({},{schema:M,table:D,commit_timestamp:U,eventType:ye,new:{},old:{},errors:oe}),this._getPayloadRecords(O))}y.callback(f,r)})}_isClosed(){return this.state===W.closed}_isJoined(){return this.state===W.joined}_isJoining(){return this.state===W.joining}_isLeaving(){return this.state===W.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),n={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&Ys.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(X.close,{},e)}_onError(e){this._on(X.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=ai(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=ai(e.columns,e.old_record)),s}}const Su=()=>{},Tu=typeof WebSocket<"u";class Ou{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=fu,this.params={},this.timeout=ii,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Su,this.conn=null,this.sendBuffer=[],this.serializer=new mu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...o)=>Promise.resolve().then(()=>Ge).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${$s.websocket}`,this.httpEndpoint=li(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(n,a)=>a(JSON.stringify(n)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ni(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Tu){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Du(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(()=>Fh).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ve.connecting:return Me.Connecting;case Ve.open:return Me.Open;case Ve.closing:return Me.Closing;default:return Me.Closed}}isConnected(){return this.connectionState()===Me.Open}channel(e,s={config:{}}){const r=new Ys(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:i,ref:n}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${s} ${r} (${n})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(X.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_u}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:i,payload:n,ref:a}=s;(a&&a===this.pendingHeartbeatRef||i===(n==null?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,n),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(X.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(pu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Du{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ve.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Ls extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Y(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Pu extends Ls{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fi extends Ls{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Eu=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};const _i=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Promise.resolve().then(()=>Ge).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Mu=()=>Eu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>Ge)).Response:Response});var ze=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};const Us=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Au=(t,e)=>ze(void 0,void 0,void 0,function*(){const s=yield Mu();t instanceof s?t.json().then(r=>{e(new Pu(Us(r),t.status||500))}).catch(r=>{e(new fi(Us(r),r))}):e(new fi(Us(t),t))}),xu=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};function Bt(t,e,s,r,i,n){return ze(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(s,xu(e,r,i,n)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Au(l,o))})})}function Ns(t,e,s,r){return ze(this,void 0,void 0,function*(){return Bt(t,"GET",e,s,r)})}function be(t,e,s,r,i){return ze(this,void 0,void 0,function*(){return Bt(t,"POST",e,r,i,s)})}function Ru(t,e,s,r,i){return ze(this,void 0,void 0,function*(){return Bt(t,"PUT",e,r,i,s)})}function pi(t,e,s,r,i){return ze(this,void 0,void 0,function*(){return Bt(t,"DELETE",e,r,i,s)})}var q=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};const Cu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $u{constructor(e,s={},r,i){this.url=e,this.headers=s,this.bucketId=r,this.fetch=_i(i)}uploadOrUpdate(e,s,r,i){return q(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},mi),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl)):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(s),h=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:n,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),c=yield u.json();return u.ok?{data:{path:l,id:c.Id,fullPath:c.Key},error:null}:{data:null,error:c}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}upload(e,s,r){return q(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,i){return q(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",s);try{let l;const h=Object.assign({upsert:mi.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",h.cacheControl)):(l=r,u["cache-control"]=`max-age=${h.cacheControl}`,u["content-type"]=h.contentType);const c=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),f=yield c.json();return c.ok?{data:{path:n,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Y(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return q(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const n=yield be(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Ls("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}update(e,s,r){return q(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return q(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}copy(e,s,r){return q(this,void 0,void 0,function*(){try{return{data:{path:(yield be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,r){return q(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield be(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,r){return q(this,void 0,void 0,function*(){try{const i=yield be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}download(e,s){return q(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Ns(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Y(o))return{data:null,error:o};throw o}})}getPublicUrl(e,s){const r=this._getFinalPath(e),i=[],n=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";n!==""&&i.push(n);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${h}`)}}}remove(e){return q(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}list(e,s,r){return q(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Cu),s),{prefix:e||""});return{data:yield be(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const ju={"X-Client-Info":"storage-js/2.6.0"};var qe=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};class Iu{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},ju),s),this.fetch=_i(r)}listBuckets(){return qe(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}getBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return qe(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return qe(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}emptyBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}}class Yu extends Iu{constructor(e,s={},r){super(e,s,r)}from(e){return new $u(this.url,this.headers,e,this.fetch)}}const Lu="2.45.1";let ft="";typeof Deno<"u"?ft="deno":typeof document<"u"?ft="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ft="react-native":ft="node";const Uu={headers:{"X-Client-Info":`supabase-js-${ft}/${Lu}`}},Nu={schema:"public"},Fu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wu={};var Hu=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};const Bu=t=>{let e;return t?e=t:typeof fetch>"u"?e=Jr:e=fetch,(...s)=>e(...s)},Gu=()=>typeof Headers>"u"?Kr:Headers,Vu=(t,e,s)=>{const r=Bu(s),i=Gu();return(n,a)=>Hu(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let h=new i(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},a),{headers:h}))})};var zu=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};function qu(t){return t.replace(/\/$/,"")}function Ju(t,e){const{db:s,auth:r,realtime:i,global:n}=t,{db:a,auth:o,realtime:l,global:h}=e,u={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},h),n),accessToken:()=>zu(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const yi="2.64.4",Ku="http://localhost:9999",Zu="supabase.auth.token",Qu={"X-Client-Info":`gotrue-js/${yi}`},gi=10,Fs="X-Supabase-Api-Version",wi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Xu(t){return Math.round(Date.now()/1e3)+t}function eh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ee=()=>typeof document<"u",Ae={tested:!1,writable:!1},_t=()=>{if(!ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ae.tested)return Ae.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ae.tested=!0,Ae.writable=!0}catch{Ae.tested=!0,Ae.writable=!1}return Ae.writable};function Ws(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const vi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Promise.resolve().then(()=>Ge).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},th=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bi=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Gt=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Hs=async(t,e)=>{await t.removeItem(e)};function sh(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,i,n,a,o,l,h,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),h=e.indexOf(t.charAt(u++)),r=a<<2|o>>4,i=(o&15)<<4|l>>2,n=(l&3)<<6|h,s=s+String.fromCharCode(r),l!=64&&i!=0&&(s=s+String.fromCharCode(i)),h!=64&&n!=0&&(s=s+String.fromCharCode(n));return s}class Vt{constructor(){this.promise=new Vt.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Vt.promiseConstructor=Promise;function ki(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(sh(r))}async function rh(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ih(t,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const a=await t(n);if(!e(n,null,a)){r(a);return}}catch(a){if(!e(n,a)){i(a);return}}})()})}function nh(t){return("0"+t.toString(16)).substr(-2)}function ah(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let n=0;n<56;n++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,nh).join("")}async function oh(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}function lh(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function uh(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await oh(t);return lh(s)}async function Je(t,e,s=!1){const r=ah();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await bi(t,`${e}-code-verifier`,i);const n=await uh(r);return[n,r===n?"plain":"s256"]}const hh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ch(t){const e=t.headers.get(Fs);if(!e||!e.match(hh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Bs extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function w(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dh extends Bs{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function fh(t){return w(t)&&t.name==="AuthApiError"}class Si extends Bs{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xe extends Bs{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Re extends xe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Gs extends xe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zt extends xe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qt extends xe{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ti extends xe{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends xe{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function zs(t){return w(t)&&t.name==="AuthRetryableFetchError"}class Oi extends xe{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var _h=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};const Ce=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ph=[502,503,504];async function Di(t){var e;if(!th(t))throw new Vs(Ce(t),0);if(ph.includes(t.status))throw new Vs(Ce(t),t.status);let s;try{s=await t.json()}catch(n){throw new Si(Ce(n),n)}let r;const i=ch(t);if(i&&i.getTime()>=wi["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Oi(Ce(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new Oi(Ce(s),t.status,s.weak_password.reasons);throw new dh(Ce(s),t.status||500,r)}const mh=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function b(t,e,s,r){var i;const n=Object.assign({},r==null?void 0:r.headers);n[Fs]||(n[Fs]=wi["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await yh(t,e,s+o,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function yh(t,e,s,r,i,n){const a=mh(e,r,i,n);let o;try{o=await t(s,Object.assign({},a))}catch(l){throw console.error(l),new Vs(Ce(l),0)}if(o.ok||await Di(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Di(l)}}function ke(t){var e;let s=null;bh(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Xu(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Pi(t){const e=ke(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Se(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gh(t){return{data:t,error:null}}function wh(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n}=t,a=_h(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function vh(t){return t}function bh(t){return t.access_token&&t.refresh_token&&t.expires_in}var kh=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};class Sh{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=vi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await b(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(w(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await b(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Se})}catch(r){if(w(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=kh(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await b(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:wh,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(w(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await b(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Se})}catch(s){if(w(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,n,a,o,l;try{const h={nextPage:null,lastPage:0,total:0},u=await b(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:vh});if(u.error)throw u.error;const c=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(O=>{const M=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(O.split(";")[1].split("=")[1]);h[`${D}Page`]=M}),h.total=parseInt(f)),{data:Object.assign(Object.assign({},c),h),error:null}}catch(h){if(w(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await b(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Se})}catch(s){if(w(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await b(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Se})}catch(r){if(w(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await b(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Se})}catch(r){if(w(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await b(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(w(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await b(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(w(s))return{data:null,error:s};throw s}}}const Th={getItem:t=>_t()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{_t()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{_t()&&globalThis.localStorage.removeItem(t)}};function Ei(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Oh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ke={debug:!!(globalThis&&_t()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Dh extends Mi{}async function Ph(t,e,s){Ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ke.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{Ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Dh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ke.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Oh();const Eh={url:Ku,storageKey:Zu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},pt=30*1e3,Ai=3;async function xi(t,e,s){return await s()}class mt{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mt.nextInstanceID,mt.nextInstanceID+=1,this.instanceID>0&&ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Eh),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Sh({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vi(i.fetch),this.lock=i.lock||xi,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ee()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Ph:this.lock=xi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:_t()?this.storage=Th:(this.memoryStorage={},this.storage=Ei(this.memoryStorage)):(this.memoryStorage={},this.storage=Ei(this.memoryStorage)),ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ee()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:n}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",n),await this._saveSession(i),setTimeout(async()=>{n==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return w(e)?{error:e}:{error:new Si("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const n=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ke}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(n){if(w(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var s,r,i;try{let n;if("email"in e){const{email:u,password:c,options:f}=e;let y=null,O=null;this.flowType==="pkce"&&([y,O]=await Je(this.storage,this.storageKey)),n=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:c,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:O},xform:ke})}else if("phone"in e){const{phone:u,password:c,options:f}=e;n=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:c,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ke})}else throw new zt("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(n){if(w(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let s;if("email"in e){const{email:n,password:a,options:o}=e;s=await b(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Pi})}else if("phone"in e){const{phone:n,password:a,options:o}=e;s=await b(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Pi})}else throw new zt("You must provide either an email or phone number and a password");const{data:r,error:i}=s;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(w(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Gt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/"),{data:n,error:a}=await b(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ke});return await Hs(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Gs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:a})}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:n,nonce:a}=e,o=await b(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ke}),{data:l,error:h}=o;return h?{data:{user:null,session:null},error:h}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:h})}catch(s){if(w(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,i,n,a;try{if("email"in e){const{email:o,options:l}=e;let h=null,u=null;this.flowType==="pkce"&&([h,u]=await Je(this.storage,this.storageKey));const{error:c}=await b(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:h,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in e){const{phone:o,options:l}=e,{data:h,error:u}=await b(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:u}}throw new zt("You must provide either an email or phone number.")}catch(o){if(w(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,r;try{let i,n;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await b(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:ke});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,h=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(i){if(w(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,r,i;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=await Je(this.storage,this.storageKey)),await b(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:gh})}catch(n){if(w(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Re;const{error:i}=await b(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(w(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:n}=e,{error:a}=await b(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:n}=e,{data:a,error:o}=await b(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new zt("You must provide either an email or phone number and a type")}catch(s){if(w(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,h,u)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,h,u))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await b(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Se}):await this._useSession(async s=>{var r,i,n;const{data:a,error:o}=s;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Re}:await b(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:Se})})}catch(s){if(w(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new Re;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Je(this.storage,this.storageKey));const{data:h,error:u}=await b(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Se});if(u)throw u;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(w(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return ki(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Re;const s=Date.now()/1e3;let r=s,i=!0,n=null;const a=ki(e.access_token);if(a.exp&&(r=a.exp,i=r<=s),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(s){if(w(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:o}=s;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Re;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(w(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!ee())throw new qt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new qt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ti("Not a valid PKCE flow url.");const s=Ws(window.location.href);if(e){if(!s.code)throw new Ti("No code detected.");const{data:ye,error:oe}=await this._exchangeCodeForSession(s.code);if(oe)throw oe;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:ye.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new qt(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:a,expires_in:o,expires_at:l,token_type:h}=s;if(!n||!o||!a||!h)throw new qt("No session defined in URL");const u=Math.round(Date.now()/1e3),c=parseInt(o);let f=u+c;l&&(f=parseInt(l));const y=f-u;y*1e3<=pt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${c}s`);const O=f-c;u-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,f,u):u-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",O,f,u);const{data:M,error:D}=await this._getUser(n);if(D)throw D;const U={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:c,expires_at:f,refresh_token:a,token_type:h,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:s.type},error:null}}catch(s){if(w(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Ws(window.location.href);return!!(ee()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Ws(window.location.href),s=await Gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:n}=s;if(n)return{error:n};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(fh(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=eh(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:n},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Je(this.storage,this.storageKey,!0));try{return await b(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(n){if(w(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(w(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:i}=await this._useSession(async n=>{var a,o,l,h,u;const{data:c,error:f}=n;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await b(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(h=c.session)===null||h===void 0?void 0:h.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ee()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(w(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:n,error:a}=s;if(a)throw a;return await b(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(w(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await ih(async i=>(i>0&&await rh(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await b(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ke})),(i,n)=>{const a=200*Math.pow(2,i);return n&&zs(n)&&Date.now()+a-r<pt})}catch(r){if(this._debug(s,"error",r),w(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),ee()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Gt(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+gi;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${gi}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),zs(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Vt;const{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new Re;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(i,"error",n),w(n)){const a={session:null,error:n};return zs(n)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(l){n.push(l)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await bi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ee()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),pt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/pt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${pt}ms, refresh threshold is ${Ai} ticks`),i<=Ai&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Mi)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ee()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,a]=await Je(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:n}=s;return n?{data:null,error:n}:await b(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(w(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:n,error:a}=s;if(a)return{data:null,error:a};const{data:o,error:l}=await b(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(s){if(w(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:n}=s;if(n)return{data:null,error:n};const{data:a,error:o}=await b(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(s){if(w(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:n}=s;return n?{data:null,error:n}:await b(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(w(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],i=r.filter(n=>n.factor_type==="totp"&&n.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(s=i.user.factors)===null||s===void 0?void 0:s.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}mt.nextInstanceID=0;const Mh=mt;class Ah extends Mh{constructor(e){super(e)}}var xh=function(t,e,s,r){function i(n){return n instanceof s?n:new s(function(a){a(n)})}return new(s||(s=Promise))(function(n,a){function o(u){try{h(r.next(u))}catch(c){a(c)}}function l(u){try{h(r.throw(u))}catch(c){a(c)}}function h(u){u.done?n(u.value):i(u.value).then(o,l)}h((r=r.apply(t,e||[])).next())})};class Rh{constructor(e,s,r){var i,n,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const o=qu(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:Nu,realtime:Wu,auth:Object.assign(Object.assign({},Fu),{storageKey:l}),global:Uu},u=Ju(r??{},h);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=u.global.headers)!==null&&n!==void 0?n:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(c,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=Vu(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new du(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Nl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return xh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,storageKey:n,flowType:a,lock:o,debug:l},h,u){var c;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ah({url:this.authUrl,headers:Object.assign(Object.assign({},f),h),storageKey:n,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:(c="Authorization"in this.headers)!==null&&c!==void 0?c:!1})}_initRealtimeClient(e){return new Ou(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ri=(t,e,s)=>new Rh(t,e,s);var Ch="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZieHR2amZmaHNpcm55eGpjdWt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjI1MTY1NjQsImV4cCI6MjAzODA5MjU2NH0.E6SFFojKzIZCRIQAhoJ49aO4yY-m1Mb2sZtSkVh-tBg";const Ci="https://api.iaon.ai",$i=Ch,E=Ri(Ci,$i);async function $e(t,e,s){console.log("call_eage_function headers = ",s);const{data:r,error:i}=await E.functions.invoke(t,{body:e,headers:s});if(i instanceof qr){const n=await i.context.json();console.log("Function returned an error",n)}else i instanceof zr?console.log("Relay error:",i.message):i instanceof Vr&&console.log("Fetch error:",i.message);if(i)throw i;return r}Ri(Ci,$i);let $h=Ms();console.log("aonweb version = ",$h);class jh{constructor(){}async islogin(){const{data:e,error:s}=await E.auth.getSession();if(s)throw s;console.log("data.session = ",e.session);let r=e&&e.session&&e.session.user;if(r){let{data:i}=await E.from("profiles").select("*").eq("id",r.id);i=i&&i.length&&i[0],r.profiles=i}return r}async login(e){const{data:s,error:r}=await E.auth.signInAnonymously({data:{inviter:e}});if(r)throw r;if(!s.session)throw new Error("login error,no session found");let i=s&&s.session&&s.session.user;if(i){let{data:n}=await E.from("profiles").select("*").eq("id",i.id);n=n&&n.length&&n[0],i.profiles=n}return i}async userinfo(){const{data:e,error:s}=await E.auth.getUser();if(s)throw s;let r=e.user;if(r){let{data:i}=await E.from("profiles").select("*").eq("id",r.id);i=i&&i.length&&i[0],r.profiles=i}return r}async third_party_login(e,s){if(!(e&&e.length))throw new Error("provider can not be null");let{data:r,error:i}=await E.auth.signInWithOAuth({provider:e,options:{redirectTo:s}});if(i)throw i;return r}async email_signUp(e,s){if(!(e&&e.length))throw new Error("email can not be null");if(!(s&&s.length))throw new Error("password can not be null");let{data:r,error:i}=await E.auth.signUp({email:e,password:s});if(i)throw i;if(r&&r.user&&!(r.user.identities&&r.user.identities.length)&&r.user.user_metadata&&!r.user.user_metadata.email)throw new Error("The email is already in use");return r}async email_login(e,s){if(!(e&&e.length))throw new Error("email can not be null");if(!(s&&s.length))throw new Error("password can not be null");let{data:r,error:i}=await E.auth.signInWithPassword({email:e,password:s});if(i)throw i;let n=r&&r.session&&r.session.user;if(n){let{data:a}=await E.from("profiles").select("*").eq("id",n.id);a=a&&a.length&&a[0],n.profiles=a}return n}async bindEmail(e){if(!(e&&e.length))throw new Error("email can not be null");const{data:s,error:r}=await E.auth.updateUser({email:e});if(r)throw r;return s}async verifyOtp(e,s,r){if(!(e&&e.length))throw new Error("email can not be null");if(!(s&&s.length))throw new Error("otp_code can not be null");const{data:i,error:n}=await E.auth.verifyOtp({email:e,token:s,type:r});if(n)throw n;return i}async resetPasswordForEmail(e,s){if(!(e&&e.length))throw new Error("email can not be null");const{data:r,error:i}=await E.auth.resetPasswordForEmail(e,{redirectTo:s});if(i)throw i;return r}async setPassword(e){if(!(e&&e.length))throw new Error("password can not be null");const{data:s,error:r}=await E.auth.updateUser({password:e});if(r)throw r;return s}async linkTwitter(e){const{data:s,error:r}=await E.auth.linkIdentity({provider:"twitter",options:{redirectTo:e}});if(r)throw r;return s}async linkGithub(e){const{data:s,error:r}=await E.auth.linkIdentity({provider:"github",options:{redirectTo:e}});if(r)throw r;return s}async logout(){const{error:e}=await E.auth.signOut();if(e)throw e;return null}async balance(e,s){if(!e){const{data:i,error:n}=await E.auth.getSession();if(n)throw n;e=i.session.user.id}if(s&&!Array.isArray(s))throw new Error("asset_ids must be a Array");return await $e("balance",{user_id:e,asset_ids:s})}}let Te=Ms();console.log("aonweb version = ",Te);class Ih{constructor(e){if(this.options=e,!(this.options&&this.options.app_key&&this.options.app_key.length))throw new Error("options.app_key is not found")}async check_app_key(){let e=this.options&&this.options.app_key&&this.options.app_key.length?this.options.app_key:null;if(!e)return new Error("options.app_key is not found");const{data:s,error:r}=await E.from("app").select("*").is("deleted_at",null).eq("id",e);if(r)throw r;let i=s&&s.length&&s[0];return i?i&&i.status==-1?null:i&&i.status!=5?new Error("App does not publish."):null:new Error("App does not exist.")}async start_task(e,s,r,i,n,a){let o=new Date().getTime();_().format("YYYY-MM-DD HH:mm:ss.SSS"),console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = start_task, message : start time = ${o}`);let l=await this.check_app_key();if(console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = check_app_key, message : end time = ${new Date().getTime()-o}`,l),l)throw l;let h=this.options.app_key;if(!a){const{data:c,error:f}=await E.auth.getSession();if(console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = getSession, message : end time = ${new Date().getTime()-o}`,c,f),f)throw f;a=c&&c.session&&c.session.user&&c.session.user.id}if(console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = getSession, message : end time = ${new Date().getTime()-o}`,a),!a)throw new Error("User not login");if(!this.task_id){let c=await $e("start_task",{models:e,user_id:a,app_key:h,result_model:s});console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = call_eage_function task, message : end time = ${new Date().getTime()-o}`,c),c&&c.code==200&&c.data&&(this.task_id=c.data.task_id)}if(!this.task_id)throw new Error("Task create failed");console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = prediction, message : start time = ${new Date().getTime()-o}`);let u=await this.prediction(r,i,this.task_id,n,a);return console.log(`${_().format("YYYY-MM-DD HH:mm:ss.SSS")} info : version = ${Te}, class = AI, method = prediction, message : end time = ${new Date().getTime()-o}`,u),u}async prediction(e,s,r,i){let n=await this.check_app_key();if(n)throw n;let a=this.options.app_key;if(!i){const{data:h,error:u}=await E.auth.getSession();if(u)throw u;i=h&&h.session&&h.session.user&&h.session.user.id}if(!i)throw new Error("User not login");let o=null;return this.options&&this.options.is_async&&(o={is_async:!0}),await $e("prediction",{models:e,inputs:s,user_id:i,workflow:r,app_key:a},o)}async prediction_result(e){console.log("prediction_result = ",e);let s=await this.check_app_key();if(s)throw s;if(this.options.app_key,!userId){const{data:i,error:n}=await E.auth.getSession();if(n)throw n;userId=i&&i.session&&i.session.user&&i.session.user.id}if(!userId)throw new Error("User not login");return await $e("prediction_result",{exec_model_id:e})}async end_task(e,s,r,i){let n=await this.check_app_key();if(n)throw n;if(this.options.app_key,!i){const{data:o,error:l}=await E.auth.getSession();if(l)throw l;i=o&&o.session&&o.session.user&&o.session.user.id}if(!i)throw new Error("User not login");if(s&&r)return await $e(s,{task_id:e,data:r});let a=await this.task(e);return this.task_id=null,a}async task(e){console.log("task = ",e);let s=await this.check_app_key();if(s)throw s;return await $e("result",{task_id:e})}async list(e){let s=await this.check_app_key();if(s)throw s;let r=this.options.app_key;if(!e){const{data:a,error:o}=await E.auth.getSession();if(o)throw o;e=a&&a.session&&a.session.user&&a.session.user.id}if(!e)throw new Error("User not login");const{data:i,error:n}=await E.from("exec_task").select("*").is("deleted_at",null).eq("user_id",e).eq("app_key",r).eq("status",2).order("created_at",{ascending:!1});if(n)throw n;return i}}const Yh=[{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"string",name:"_userId",type:"string"},{internalType:"string",name:"_appId",type:"string"},{internalType:"string[]",name:"_modelIds",type:"string[]"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"excuteByUserId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"string",name:"_clusterId",type:"string"}],name:"failExcuteByClusterId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"failExcuteByTokenId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"string",name:"_userId",type:"string"},{internalType:"string",name:"_appId",type:"string"},{internalType:"string[]",name:"_modelIds",type:"string[]"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"startExcuteByUserId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"string",name:"_clusterId",type:"string"}],name:"successExcuteByComputId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_excuteId",type:"string"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"successExcuteByTokenId",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class Lh extends qs{constructor({rpc_url:e=Ze.rpc,force_aon:s=!0,abi:r=Yh,contract_address:i=Ze.address.AonAiExcutor,api_type:n="contract",ai_server:a=null,app_key:o=null,auth:l=null,is_async:h=!1,dev_mode:u=!1}={}){super({rpc_url:e,force_aon:s,abi:r,contract_address:i}),this.api_type=n,this.ai_server=a,this.app_key=o,this.auth=l,this.is_async=h,this.dev_mode=u}}class Uh{constructor({page:e=1,size:s=10,user_id:r=null,excute_id:i=null,status:n=null,api_path:a=null,created_time:o=[]}={}){this.page=e,this.size=s,this.filter={},r&&r.length&&(this.filter.user_id=r),i&&i.length&&(this.filter.excute_id=i),n!=null&&n!=null&&(this.filter.status=n),a&&a.length&&(this.filter.api_path=a),o&&o.length&&(this.filter.created_time=o),console.log("ListOptions this.filter",this.filter)}}var Nh=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const Fh=Object.freeze(Object.defineProperty({__proto__:null,default:Fl(Nh)},Symbol.toStringTag,{value:"Module"}));N.AI=Ih,N.AIOptions=Lh,N.ListOptions=Uh,N.Options=qs,N.User=jh,N.call_eage_function=$e,N.getVersion=Ms,N.supabase=E,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})});
